# Test Design: Story 1.1 - Project Bootstrap & Core Configuration

**Date:** 2026-01-20
**Designer:** Quinn (Test Architect)

---

## Test Strategy Overview

- **Total test scenarios:** 8
- **Unit tests:** 0 (0%) - No business logic in bootstrap story
- **Integration tests:** 7 (87.5%) - Configuration and startup validation
- **E2E tests:** 1 (12.5%) - Full application smoke test
- **Priority distribution:** P0: 4, P1: 2, P2: 0, P3: 2

### Strategy Rationale

Story 1.1 is a **bootstrap/infrastructure story** with no business logic. Testing focuses on:
1. Spring Boot application context loads correctly
2. Database connectivity and auto-creation works
3. Configuration is properly applied
4. Package structure is valid

Unit tests are not applicable because there is no custom logic to test in isolation.

---

## Test Scenarios by Acceptance Criteria

### AC1: Maven project with Spring Boot 3.2+ and Java 17

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-001 | Integration | P0 | Context loads with correct Spring Boot version | Build must compile and load |

**Test Implementation:**
```java
@SpringBootTest
class HoneyAiApplicationTests {
    @Test
    void contextLoads() {
        // Spring context loads = dependencies resolved correctly
    }
}
```

---

### AC2: Dependencies configured in pom.xml

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-002 | Integration | P0 | All required dependencies available at runtime | Missing deps = build failure |

**Test Implementation:** Covered by `contextLoads()` - if dependencies are missing, Spring context fails to load.

**Verification Checklist (Build-time):**
- [ ] spring-boot-starter-web
- [ ] spring-boot-starter-data-jpa
- [ ] spring-boot-starter-thymeleaf
- [ ] spring-boot-starter-validation
- [ ] spring-boot-devtools
- [ ] sqlite-jdbc (3.45.0.0)
- [ ] hibernate-community-dialects
- [ ] lombok
- [ ] spring-boot-starter-test

---

### AC3: Package structure created

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-003 | Integration | P1 | Component scan finds all packages | Structure must be scannable |

**Test Implementation:**
```java
@SpringBootTest
class PackageStructureTest {
    @Autowired
    private ApplicationContext context;

    @Test
    void packageStructureIsValid() {
        // Verify base package is scanned
        assertThat(context.getBeanDefinitionNames())
            .anyMatch(name -> name.contains("honeyAi"));
    }
}
```

---

### AC4: application.yml configuration

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-004 | Integration | P0 | SQLite datasource connects successfully | Database is core infrastructure |
| 1.1-INT-005 | Integration | P1 | Server port is 8080 | Required for consistent access |

**Test Implementation:**
```java
@SpringBootTest
class ConfigurationTest {
    @Autowired
    private DataSource dataSource;

    @Value("${server.port}")
    private int serverPort;

    @Test
    void dataSourceIsConfigured() throws SQLException {
        assertThat(dataSource.getConnection()).isNotNull();
    }

    @Test
    void serverPortIs8080() {
        assertThat(serverPort).isEqualTo(8080);
    }
}
```

---

### AC5: HoneyAiApplication.java main class

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-001 | Integration | P0 | (Same as AC1) Context loads | Main class annotation correct |

**Covered by:** `contextLoads()` test

---

### AC6: Application starts on localhost:8080

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-E2E-001 | E2E | P0 | Application responds on port 8080 | Critical smoke test |

**Test Implementation:**
```java
@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
class ApplicationStartupTest {
    @LocalServerPort
    private int port;

    @Autowired
    private TestRestTemplate restTemplate;

    @Test
    void applicationStartsAndResponds() {
        // Even 404 means app is running
        ResponseEntity<String> response = restTemplate.getForEntity(
            "http://localhost:" + port + "/", String.class);
        assertThat(response.getStatusCode()).isIn(
            HttpStatus.OK, HttpStatus.NOT_FOUND);
    }
}
```

---

### AC7: ./data/ directory auto-created

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-006 | Integration | P1 | Database file created on startup | Runtime setup validation |

**Test Implementation:**
```java
@SpringBootTest
class DatabaseCreationTest {
    @Test
    void databaseFileIsCreated() {
        Path dbPath = Paths.get("./data/honeyai.db");
        assertThat(Files.exists(dbPath)).isTrue();
    }
}
```

---

### AC8: DevTools enabled

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 1.1-INT-007 | Integration | P3 | DevTools dependency present | Dev convenience, low priority |

**Test Implementation:** Manual verification or dependency check. Not critical for production.

---

### AC9: README.md documentation

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| N/A | Manual | P3 | README contains required sections | Documentation review |

**Verification Checklist:**
- [ ] Project description present
- [ ] Tech stack listed
- [ ] How to run: `./mvnw spring-boot:run`
- [ ] Prerequisites: JDK 17+

---

## Test Scenario Summary

| ID | Level | Priority | Description | AC |
|----|-------|----------|-------------|-----|
| 1.1-INT-001 | Integration | P0 | Spring context loads successfully | AC1, AC5 |
| 1.1-INT-002 | Integration | P0 | All dependencies available | AC2 |
| 1.1-INT-003 | Integration | P1 | Package structure scannable | AC3 |
| 1.1-INT-004 | Integration | P0 | SQLite datasource connects | AC4 |
| 1.1-INT-005 | Integration | P1 | Server port is 8080 | AC4 |
| 1.1-INT-006 | Integration | P1 | Database file auto-created | AC7 |
| 1.1-INT-007 | Integration | P3 | DevTools present | AC8 |
| 1.1-E2E-001 | E2E | P0 | Application responds on startup | AC6 |

---

## Recommended Execution Order

1. **P0 Integration tests** (fail fast on infrastructure)
   - 1.1-INT-001: Context loads
   - 1.1-INT-002: Dependencies available
   - 1.1-INT-004: SQLite connects
2. **P0 E2E test**
   - 1.1-E2E-001: Application responds
3. **P1 tests**
   - 1.1-INT-003: Package structure
   - 1.1-INT-005: Server port
   - 1.1-INT-006: Database file created
4. **P3 tests** (if time permits)
   - 1.1-INT-007: DevTools
   - Manual README review

---

## Coverage Gaps

None identified. All functional acceptance criteria have test coverage.

**Note:** AC9 (README.md) is documentation and verified manually, not via automated tests.

---

## Gate YAML Block

```yaml
test_design:
  scenarios_total: 8
  by_level:
    unit: 0
    integration: 7
    e2e: 1
  by_priority:
    p0: 4
    p1: 3
    p2: 0
    p3: 1
  coverage_gaps: []
```

---

## Implementation Notes

The existing `HoneyAiApplicationTests.java` file covers the most critical test (1.1-INT-001 contextLoads). Additional tests should be added to fully cover P0 and P1 scenarios.

**Recommended test file structure:**
```
src/test/java/com/honeyai/
├── HoneyAiApplicationTests.java     # 1.1-INT-001 (exists)
├── ConfigurationTest.java           # 1.1-INT-004, 1.1-INT-005
├── DatabaseCreationTest.java        # 1.1-INT-006
└── ApplicationStartupTest.java      # 1.1-E2E-001
```
